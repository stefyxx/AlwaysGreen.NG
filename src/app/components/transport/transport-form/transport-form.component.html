<p>Start your transport!</p>
<form [formGroup]="form" (ngSubmit)="submit()">

    <div class="input-group">
        <span class="p-float-label">
            <p-calendar dateFormat="dd/mm/yy" id="bd" formControlName="date"></p-calendar>
            <label for="bd">Day of departure </label>
        </span>
        <app-form-error [control]="form.controls['date']"></app-form-error>
    </div>
    <div class="input-group">
        <!-- <p-dropdown [options]="emptybottles()" [(ngModel)]="selectedBottle" optionLabel="typeName" [showClear]="true"
            placeholder="Select a emptybottles"></p-dropdown> -->

            <p-button class="pb-3" label="Add bottle" icon="pi pi-plus" iconPos="right" (onClick)="add()"></p-button>
            <br>
            <br>
            <ng-container formArrayName="emptybottles" >
                <p-table [value]="bottles.controls" [tableStyle]="{'min-width': '60rem'}" >
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Type</th>
                            <th>Quantity</th>
                            <th></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-bottle let-i="rowIndex">
                        <tr [formGroup]="bottle" >
                            <td>
                                <p-dropdown [options]="emptybottles()"
                                appendTo="body"
                                optionLabel="typeName" [showClear]="true"
                                optionValue="typeName"
                                placeholder="Select a emptybottles"
                                formControlName="typeName"></p-dropdown>
                            </td>
                            <td>
                                <p-inputNumber formControlName="quantity"></p-inputNumber>
                                
                            </td>
                            <td>
                                <p-button class="pb-3" label="Remove bottle" icon="pi pi-trash" iconPos="left" (onClick)="delete(i)"></p-button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </ng-container>
    </div>
    <div class="input-group">
        <p-dropdown formControlName="locationFrom" [options]="allLocations()" optionLabel="label" placeholder="Select where to recover the empty bottles from"></p-dropdown>
    </div>
    <div class="input-group">
        <p-dropdown formControlName="locationTo" [options]="allLocations()" optionLabel="label" placeholder="Select where to take the empty bottles"></p-dropdown>
    </div>
    <div class="input-group">
        <p-dropdown formControlName="courier" [options]="couriers()" optionLabel="label" placeholder="Select a courier"></p-dropdown>
    </div>

    <div class="input-group flex flex-end">
        <p-button [disabled]="form.invalid" type="submit" severity="info">Ajouter</p-button>
    </div>
    <div class="input-group flex flex-end">
        <span class="padding-plus">Go back to page with all trasports</span>
        <p-button [routerLink]="['/transport']" severity="success" size="small" icon="pi pi-home"></p-button>
    </div>
    
</form>

<div>

</div>
